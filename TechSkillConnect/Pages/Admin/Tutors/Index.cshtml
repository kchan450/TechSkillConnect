@* @page *@
@* @model TechSkillConnect.Pages.Admin.Tutors.IndexModel *@

@* @{ *@
@* 	ViewData["Title"] = "Tutor Index"; *@
@* } *@

@* <h1>Tutor Index</h1> *@

@* <p> *@
@* 	<a asp-page="Create" class="btn btn-primary">Create New</a> *@
@* </p> *@

@* <!-- 🔹 Search and Filter Form --> *@
@* <form method="get"> *@
@* 	<div class="form-group"> *@
@* 		<label>Search Tutor:</label> *@
@* 		<input asp-for="SearchString" class="form-control" placeholder="Enter Username, Name, or Email" /> *@
@* 	</div> *@

@* 	<div class="form-group"> *@
@* 		<label>Filter by Country:</label> *@
@* 		<select asp-for="SelectedCountry" asp-items="Model.CountryOptions" class="form-control"> *@
@* 			<option value="">All</option> *@
@* 		</select> *@
@* 	</div> *@

@* 	<button type="submit" class="btn btn-primary">Apply Filters</button> *@
@* </form> *@

@* <table class="table table-striped"> *@
@* 	<thead> *@
@*         <tr> *@
@*             <th> *@
@*                 <a asp-page="./Index" asp-route-sortOrder="@Model.UsernameSort"  *@
@*                 asp-route-currentFilter="@Model.CurrentFilter" *@
@*                 class="sort-link"> *@
@*                     <span>@Html.DisplayNameFor(model => model.Tutors[0].Tutor_username)</span> *@
@*                     <i class="fa fa-fw fa-sort"></i> *@
@*                 </a> *@
@*             </th> *@
@*             <th> *@
@*                 <a asp-page="./Index" asp-route-sortOrder="@Model.FirstnameSort"  *@
@*                 asp-route-currentFilter="@Model.CurrentFilter" *@
@*                 class="sort-link"> *@
@*                     <span>@Html.DisplayNameFor(model => model.Tutors[0].Tutor_firstname)</span> *@
@*                     <i class="fa fa-fw fa-sort"></i> *@
@*                 </a> *@
@*             </th> *@
@*             <th> *@
@*                 <a asp-page="./Index" asp-route-sortOrder="@Model.LastnameSort"  *@
@*                 asp-route-currentFilter="@Model.CurrentFilter" *@
@*                 class="sort-link"> *@
@*                     <span>@Html.DisplayNameFor(model => model.Tutors[0].Tutor_lastname)</span> *@
@*                     <i class="fa fa-fw fa-sort"></i> *@
@*                 </a> *@
@*             </th> *@
@*             <th> *@
@*                 <a asp-page="./Index" asp-route-sortOrder="@Model.EmailSort"  *@
@*                 asp-route-currentFilter="@Model.CurrentFilter" *@
@*                 class="sort-link"> *@
@*                     <span>@Html.DisplayNameFor(model => model.Tutors[0].TutorEmail)</span> *@
@*                     <i class="fa fa-fw fa-sort"></i> *@
@*                 </a> *@
@*             </th> *@
@*             <th> *@
@*                 <a asp-page="./Index" asp-route-sortOrder="@Model.PhoneSort" *@
@*                 asp-route-currentFilter="@Model.CurrentFilter" *@
@*                 class="sort-link"> *@
@*                     <span>@Html.DisplayNameFor(model => model.Tutors[0].Tutor_phone)</span> *@
@*                     <i class="fa fa-fw fa-sort"></i> *@
@*                 </a> *@
@*             </th> *@
@*             <th> *@
@*                 <a asp-page="./Index" asp-route-sortOrder="@Model.CountryOfBirthSort"  *@
@*                 asp-route-currentFilter="@Model.CurrentFilter"class="sort-link"> *@
@*                     <span>@Html.DisplayNameFor(model => model.Tutors[0].CountryOfBirth)</span> *@
@*                     <i class="fa fa-fw fa-sort"></i> *@
@*                 </a> *@
@*             </th> *@
@*             <th> *@
@*                 <a asp-page="./Index" asp-route-sortOrder="@Model.TutorRegistrationDateSort" *@
@*                    asp-route-currentFilter="@Model.CurrentFilter" class="sort-link"> *@
@*                     <span>@Html.DisplayNameFor(model => model.Tutors[0].Tutor_registration_date)</span> *@
@*                     <i class="fa fa-fw fa-sort"></i> *@
@*                 </a> *@
@*             </th> *@
@*             <th>Actions</th> *@
@*         </tr> *@


@* 	</thead> *@
@* 	<tbody> *@
@* 		@foreach (var item in Model.Tutors) *@
@* 		{ *@
@* 			<tr> *@
@* 				<td>@Html.DisplayFor(modelItem => item.Tutor_username)</td> *@
@* 				<td>@Html.DisplayFor(modelItem => item.Tutor_firstname)</td> *@
@* 				<td>@Html.DisplayFor(modelItem => item.Tutor_lastname)</td> *@
@* 				<td>@Html.DisplayFor(modelItem => item.TutorEmail)</td> *@
@* 				<td>@Html.DisplayFor(modelItem => item.Tutor_phone)</td> *@
@* 				<td>@Html.DisplayFor(modelItem => item.CountryOfBirth)</td> *@
@* 				<td>@item.Tutor_registration_date.ToString("yyyy-MM-dd")</td> *@
@* 				<td> *@
@* 					<a asp-page="./Edit" asp-route-id="@item.TutorID" class="btn btn-sm btn-warning">Edit</a> *@
@* 					<a asp-page="./Details" asp-route-id="@item.TutorID" class="btn btn-sm btn-info">Details</a> *@
@* 					<a asp-page="./Delete" asp-route-id="@item.TutorID" class="btn btn-sm btn-danger">Delete</a> *@
@* 				</td> *@
@* 			</tr> *@
@* 		} *@
@* 	</tbody> *@
@* </table> *@

@* @{ *@
 
@*     var prevDisabled = !Model.Tutors.HasPreviousPage ? "disabled" : ""; *@
@*     var nextDisabled = !Model.Tutors.HasNextPage ? "disabled" : ""; *@
@* } *@

@* <a asp-page="./Index" *@
@*    asp-route-sortOrder="@Model.CurrentSort" *@
@*    asp-route-pageIndex="@(Model.Tutors.PageIndex - 1)" *@
@*    asp-route-currentFilter="@Model.CurrentFilter" *@
@*    class="btn btn-primary @prevDisabled"> *@
@*     Previous *@
@* </a> *@
@* <a asp-page="./Index" *@
@*    asp-route-sortOrder="@Model.CurrentSort" *@
@*    asp-route-pageIndex="@(Model.Tutors.PageIndex + 1)" *@
@*    asp-route-currentFilter="@Model.CurrentFilter" *@
@*    class="btn btn-primary @nextDisabled"> *@
@*     Next *@
@* </a> *@

@page
@model TechSkillConnect.Pages.Admin.Tutors.IndexModel

@{
	ViewData["Title"] = "Tutor Index";
}

<h1>Tutor Index</h1>

<p>

@* 	<a asp-page="Create" class="btn btn-primary">Create New</a>

	<a asp-page="Create" class="btn btn-primary">
		<i class="fa fa-plus"></i> Create
	</a> *@

	<a asp-page="Create" class="btn btn-success text-white fw-bold d-inline-flex align-items-center" style="border-radius: 50px; padding: 10px 20px;">
		<i class="fa fa-plus-circle me-2"></i> Create New
	</a>

</p>

<!-- 🔹 Search and Filter Form -->
<form method="get">
	<div class="form-group">
		<label>Search Tutor:</label>
		<input asp-for="SearchString" class="form-control" placeholder="Enter Username, Name, or Email" />
	</div>

	<div class="form-group">
		<label>Filter by Country:</label>
		<select asp-for="SelectedCountry" asp-items="Model.CountryOptions" class="form-control">
			<option value="">All</option>
		</select>
	</div>

	<button type="submit" class="btn btn-primary">Apply Filters</button>
</form>

@if (Model.Tutors != null && Model.Tutors.Any())
{
<!-- 🔹 Responsive Table -->
<div class="table-responsive">
	<table class="table table-striped table-bordered table-sm">
		<thead>
			<tr>
		@* 		<th>
					<a asp-page="./Index" asp-route-sortOrder="@Model.UsernameSort" asp-route-currentFilter="@Model.CurrentFilter" class="sort-link">
						<span>@Html.DisplayNameFor(model => model.Tutors[0].Tutor_username)</span>
						<i class="fa fa-fw fa-sort"></i>
					</a>
				</th> *@
				<th>
					<a asp-page="./Index" asp-route-sortOrder="@Model.FirstnameSort" asp-route-currentFilter="@Model.CurrentFilter" class="sort-link">
						<span>@Html.DisplayNameFor(model => model.Tutors[0].Tutor_firstname)</span>
						<i class="fa fa-fw fa-sort"></i>
					</a>
				</th>
				<th>
					<a asp-page="./Index" asp-route-sortOrder="@Model.LastnameSort" asp-route-currentFilter="@Model.CurrentFilter" class="sort-link">
						<span>@Html.DisplayNameFor(model => model.Tutors[0].Tutor_lastname)</span>
						<i class="fa fa-fw fa-sort"></i>
					</a>
				</th>
				<th>
					<a asp-page="./Index" asp-route-sortOrder="@Model.EmailSort" asp-route-currentFilter="@Model.CurrentFilter" class="sort-link">
						<span>@Html.DisplayNameFor(model => model.Tutors[0].TutorEmail)</span>
						<i class="fa fa-fw fa-sort"></i>
					</a>
				</th>
				<th>
					<a asp-page="./Index" asp-route-sortOrder="@Model.PhoneSort" asp-route-currentFilter="@Model.CurrentFilter" class="sort-link">
						<span>@Html.DisplayNameFor(model => model.Tutors[0].Tutor_phone)</span>
						<i class="fa fa-fw fa-sort"></i>
					</a>
				</th>
				<th>
					<a asp-page="./Index" asp-route-sortOrder="@Model.CountryOfBirthSort" asp-route-currentFilter="@Model.CurrentFilter" class="sort-link">
						<span>@Html.DisplayNameFor(model => model.Tutors[0].CountryOfBirth)</span>
						<i class="fa fa-fw fa-sort"></i>
					</a>
				</th>
				<th>
					<a asp-page="./Index" asp-route-sortOrder="@Model.TutorRegistrationDateSort" asp-route-currentFilter="@Model.CurrentFilter" class="sort-link">
						<span>@Html.DisplayNameFor(model => model.Tutors[0].Tutor_registration_date)</span>
						<i class="fa fa-fw fa-sort"></i>
					</a>
				</th>
				<th>Actions</th>
			</tr>
		</thead>
		<tbody>
			@foreach (var item in Model.Tutors)
			{
				<tr>
					@* <td>@Html.DisplayFor(modelItem => item.Tutor_username)</td> *@
					<td>@Html.DisplayFor(modelItem => item.Tutor_firstname)</td>
					<td>@Html.DisplayFor(modelItem => item.Tutor_lastname)</td>
					<td style="max-width: 180px; word-break: break-word;">@Html.DisplayFor(modelItem => item.TutorEmail)</td>
					<td>@Html.DisplayFor(modelItem => item.Tutor_phone)</td>
					<td>@Html.DisplayFor(modelItem => item.CountryOfBirth)</td>
					<td>@item.Tutor_registration_date.ToString("yyyy-MM-dd")</td>
					<td>
						<div class="btn-group btn-group-sm" role="group">
							<a asp-page="./Edit" asp-route-id="@item.TutorID" class="btn btn-warning">Edit</a>
							<a asp-page="./Details" asp-route-id="@item.TutorID" class="btn btn-info">Details</a>
							<a asp-page="./Delete" asp-route-id="@item.TutorID" class="btn btn-danger">Delete</a>
						</div>
					</td>
				</tr>
			}
		</tbody>
	</table>
</div>
}


@if (Model.Tutors != null && Model.Tutors.Any())
{
<!-- 🔹 Pagination -->
	var prevDisabled = !Model.Tutors.HasPreviousPage ? "disabled" : "";
	var nextDisabled = !Model.Tutors.HasNextPage ? "disabled" : "";



<nav aria-label="Page navigation">
	<ul class="pagination justify-content-center">
		<li class="page-item @(Model.Tutors.HasPreviousPage ? "" : "disabled")">
			<a class="page-link" asp-page="./Index"
			   asp-route-sortOrder="@Model.CurrentSort"
			   asp-route-pageIndex="@(Model.Tutors.PageIndex - 1)"
			   asp-route-currentFilter="@Model.CurrentFilter"
			   aria-label="Previous">
				<span aria-hidden="true">&laquo;</span>
				<span class="visually-hidden">Previous</span>
			</a>
		</li>

		<li class="page-item disabled">
			<span class="page-link">
				Page @Model.Tutors.PageIndex
			</span>
		</li>

		<li class="page-item @(Model.Tutors.HasNextPage ? "" : "disabled")">
			<a class="page-link" asp-page="./Index"
			   asp-route-sortOrder="@Model.CurrentSort"
			   asp-route-pageIndex="@(Model.Tutors.PageIndex + 1)"
			   asp-route-currentFilter="@Model.CurrentFilter"
			   aria-label="Next">
				<span aria-hidden="true">&raquo;</span>
				<span class="visually-hidden">Next</span>
			</a>
		</li>
	</ul>
</nav>
}